<section class="menu">
  <div class="container">
    <div class="logo">
      <img src="assets/images/keys_logo_2.png" >
    </div>

    <mat-list role="list">
      <ng-container *ngFor="let menu of menusToShow" [ngTemplateOutlet]="!menu?.childrens ? singleMenu : dropdown" [ngTemplateOutletContext]="{ menu: menu }"></ng-container>
    </mat-list>
  </div>
</section>


<ng-template #singleMenu let-menu="menu">
  <mat-list-item
    (click)="runEvent(menu)"
    *ngIf="!menu.childrens; else dropdown"
    [routerLink]="[menu?.router]"
    routerLinkActive="router-link-active"
  >
    <mat-icon [ngClass]="{ 'pagamentos-icon': menu.label === 'Pagamentos' }">{{menu.icon}}</mat-icon>
    <span>{{menu.label}}</span>
  </mat-list-item>
</ng-template>


<!--<ng-template #singleMenu let-menu="menu">
  <mat-list-item (click)="runEvent(menu)" *ngIf="!menu.childrens; else dropdown"
    [routerLink]="[menu?.router]" routerLinkActive="router-link-active"
    [ngClass]="{ 'pagamentos-menu': menu.label === 'Pagamentos' }">
    <mat-icon [ngClass]="{ 'pagamentos-icon': menu.label === 'Pagamentos' }">{{menu.icon}}</mat-icon>
    <span>{{menu.label}}</span>
  </mat-list-item>
</ng-template>-->


<!--<ng-template #dropdown let-menu="menu">
  <mat-accordion>
    <mat-expansion-panel hideToggle>
      <mat-expansion-panel-header>
        <mat-panel-title>
          <mat-icon>{{menu.icon}}</mat-icon>
          <span>{{menu.label}}</span>
        </mat-panel-title>
      </mat-expansion-panel-header>
      <mat-list-item *ngFor="let child of menu.childrens" [routerLink]="[child?.router]" routerLinkActive="router-link-active" >
        <li><span class="child">{{child.label}}</span></li>
      </mat-list-item>
    </mat-expansion-panel>
  </mat-accordion>
</ng-template>-->


<ng-template #dropdown let-menu="menu">
  <div class="menu-item" (mouseenter)="showSubmenu = true" (mouseleave)="showSubmenu = false">
    <mat-list-item>
      <mat-icon>{{menu.icon}}</mat-icon>
      <span>{{menu.label}}</span>
    </mat-list-item>
    <div class="submenu" *ngIf="showSubmenu">
      <mat-list-item *ngFor="let child of menu.childrens" [routerLink]="[child?.router]" routerLinkActive="router-link-active">
        <span>{{child.label}}</span>
      </mat-list-item>
    </div>
  </div>
</ng-template>
